webpackJsonp([21],{400:function(o,e,n){"use strict";o.exports=function(o){n(401),n(210);var e=n(44),t=n(179),i=n(402),s=t.getUserRole()===window.Enums.UserRole.Anonymous;return i.init(o),!t.isPublic()&&s?t.isMobile()?{getLoginScreenView:function(){return n(403)},getHashModuleName:function(){return i.HashModuleName},beforeAppRunning:function(){e.isNonEmptyString(i.CustomLoginUrl)&&(window.location.href=i.CustomLoginUrl)}}:{getScreens:function(){var o={};return e.isNonEmptyString(i.CustomLoginUrl)||(o[i.HashModuleName]=function(){return n(403)}),o},beforeAppRunning:function(){e.isNonEmptyString(i.CustomLoginUrl)&&(window.location.href=i.CustomLoginUrl)}}:null}},401:function(o,e,n){"use strict";var t=n(2),i={};i.LoginSignMeType={DefaultOff:0,DefaultOn:1,Unuse:2},void 0===window.Enums&&(window.Enums={}),t.extendOwn(window.Enums,i)},402:function(o,e,n){"use strict";var t=n(2),i=n(44);o.exports={ServerModuleName:"StandardLoginFormWebclient",HashModuleName:"login",AllowChangeLanguage:!1,CustomLoginUrl:"",CustomLogoUrl:"",DemoLogin:"",DemoPassword:"",InfoText:"",BottomInfoHtmlText:"",LoginSignMeType:Enums.LoginSignMeType.DefaultOff,UseDropdownLanguagesView:!1,init:function(o){var e=o.StandardLoginFormWebclient,n=o.BrandingWebclient;t.isEmpty(e)||(this.ServerModuleName=i.pString(e.ServerModuleName,this.ServerModuleName),this.HashModuleName=i.pString(e.HashModuleName,this.HashModuleName),this.AllowChangeLanguage=i.pBool(e.AllowChangeLanguage,this.AllowChangeLanguage),this.CustomLoginUrl=i.pString(e.CustomLoginUrl,this.CustomLoginUrl),this.DemoLogin=i.pString(e.DemoLogin,this.DemoLogin),this.DemoPassword=i.pString(e.DemoPassword,this.DemoPassword),this.InfoText=i.pString(e.InfoText,this.InfoText),this.BottomInfoHtmlText=i.pString(e.BottomInfoHtmlText,this.BottomInfoHtmlText),this.LoginSignMeType=i.pEnum(e.LoginSignMeType,Enums.LoginSignMeType,this.LoginSignMeType),this.UseDropdownLanguagesView=i.pBool(e.UseDropdownLanguagesView,this.UseDropdownLanguagesView)),t.isEmpty(n)||(this.CustomLogoUrl=i.pString(n.LoginLogo,this.CustomLogoUrl))}}},403:function(o,e,n){"use strict";function t(){d.call(this,"StandardLoginFormWebclient"),this.sCustomLogoUrl=c.CustomLogoUrl,this.sInfoText=c.InfoText,this.sBottomInfoHtmlText=c.BottomInfoHtmlText,this.login=a.observable(""),this.password=a.observable(""),this.loginFocus=a.observable(!1),this.passwordFocus=a.observable(!1),this.loading=a.observable(!1),this.bUseSignMe=c.LoginSignMeType===Enums.LoginSignMeType.Unuse,this.signMe=a.observable(Enums.LoginSignMeType.DefaultOn===c.LoginSignMeType),this.signMeFocused=a.observable(!1),this.canBeLogin=a.computed(function(){return!this.loading()},this),this.signInButtonText=a.computed(function(){return this.loading()?g.i18n("COREWEBCLIENT/ACTION_SIGN_IN_IN_PROGRESS"):g.i18n("COREWEBCLIENT/ACTION_SIGN_IN")},this),this.loginCommand=l.createCommand(this,this.signIn,this.canBeLogin),this.login(c.DemoLogin||""),this.password(c.DemoPassword||""),this.shake=a.observable(!1).extend({autoResetToFalse:800}),this.bRtl=L.IsRTL,this.aLanguages=L.LanguageList,this.currentLanguage=a.observable(L.Language),this.bAllowChangeLanguage=c.AllowChangeLanguage&&!h.isMobile(),this.bUseDropdownLanguagesView=c.UseDropdownLanguagesView,h.broadcastEvent("StandardLoginFormWebclient::ConstructView::after",{Name:this.ViewConstructorName,View:this})}var i=n(2),s=n(1),a=n(46),g=n(43),r=n(177),l=n(213),u=n(181),h=n(179),m=n(178),d=n(194),p=n(189),L=n(45),c=n(402),w=s("html");i.extendOwn(t.prototype,d.prototype),t.prototype.ViewTemplate="StandardLoginFormWebclient_LoginView",t.prototype.ViewConstructorName="CLoginView",t.prototype.onBind=function(){w.addClass("non-adjustable-valign")},t.prototype.onShow=function(){i.delay(i.bind(function(){""===this.login()&&this.loginFocus(!0)},this),1)},t.prototype.signIn=function(){if(this.loading()||""===s.trim(this.login()))this.loginFocus(!0),this.shake(!0);else{var o={Login:s.trim(this.login()),Password:s.trim(this.password()),Language:s.cookie("aurora-selected-lang")||"",SignMe:this.signMe()};this.loading(!0),p.send("StandardLoginFormWebclient","Login",o,this.onSystemLoginResponse,this,1e5)}},t.prototype.onSystemLoginResponse=function(o,e){!1===o.Result?(this.loading(!1),this.shake(!0),u.showErrorByCode(o,g.i18n("COREWEBCLIENT/ERROR_PASS_INCORRECT"))):(s.cookie("AuthToken",o.Result.AuthToken,{expires:30}),s.removeCookie("aurora-selected-lang"),""!==window.location.search&&null===r.getRequestParam("reset-pass")&&null===r.getRequestParam("invite-auth")&&null===r.getRequestParam("oauth")?r.clearAndReloadLocation(m.ie8AndBelow,!0):r.clearAndReloadLocation(m.ie8AndBelow,!1))},t.prototype.changeLanguage=function(o){o&&this.bAllowChangeLanguage&&(s.cookie("aurora-lang-on-login",o,{expires:30}),s.cookie("aurora-selected-lang",o,{expires:30}),window.location.reload())},o.exports=new t}});