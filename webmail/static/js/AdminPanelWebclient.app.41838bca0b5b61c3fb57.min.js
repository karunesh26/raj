webpackJsonp([2],{232:function(t,e,i){"use strict";t.exports=function(t){var e=i(179),s=i(3);if(e.getUserRole()===Enums.UserRole.SuperAdmin){var n=i(2),r=i(43),o=i(233),a=[];return o.init(t),{start:function(){a.push({GetTabView:function(t){i.e(1,function(){t(i(242))})},TabName:o.HashModuleName+"-db",TabTitle:r.i18n("ADMINPANELWEBCLIENT/LABEL_DB_SETTINGS_TAB")}),a.push({GetTabView:function(t){i.e(1,function(){t(i(243))})},TabName:o.HashModuleName+"-security",TabTitle:r.i18n("ADMINPANELWEBCLIENT/LABEL_SECURITY_SETTINGS_TAB")}),a.push({GetTabView:function(t){i.e(1,function(){t(i(244))})},TabName:"common",TabTitle:r.i18n("ADMINPANELWEBCLIENT/LABEL_COMMON_SETTINGS_TAB")}),a.push({GetTabView:function(t){i.e(1,function(){t(i(245))})},TabName:"about",TabTitle:r.i18n("ADMINPANELWEBCLIENT/LABEL_ABOUT_SETTINGS_TAB")})},getScreens:function(){var t={};return t[o.HashModuleName]=function(){return new s(function(t,e){i.e(1,function(e){var r=i(235),o=[];n.each(a,function(t){var e=r.registerTab(t.GetTabView,t.TabName,t.TabTitle);e&&o.push(e)}),s.all(o).then(function(){r.sortRegisterTabs(),t(r)},function(){r.sortRegisterTabs(),t(r)})})})},t},getAbstractSettingsFormViewClass:function(){return i(234)},registerAdminPanelTab:function(t,e,i){a.push({GetTabView:t,TabName:e,TabTitle:i})},setAddHash:function(t){var e=i(235);e.setAddHash(t)}}}return null}},233:function(t,e,i){"use strict";var s=i(2),n=i(44);t.exports={ServerModuleName:"AdminPanelWebclient",HashModuleName:"admin",EntitiesData:[{Type:"User",ScreenHash:"users",LinkTextKey:"ADMINPANELWEBCLIENT/HEADING_USERS_SETTINGS_TABNAME"}],EntitiesPerPage:20,TabsOrder:["licensing","admin-security","admin-db","logs-viewer","system","common","modules","mail","mail-domains","mail-accounts","mail-servers","contacts","calendar","files","mobilesync","outlooksync","helpdesk","openpgp","about"],init:function(t){var e=t.Core;s.isEmpty(e)||(this.EntitiesPerPage=n.pPositiveInt(e.EntitiesPerPage,this.EntitiesPerPage),this.TabsOrder=n.pArray(e.TabsOrder,this.TabsOrder))}}},234:function(t,e,i){"use strict";function s(t){this.sServerModule=t?t:"Core",this.isSaving=r.observable(!1),this.visible=r.observable(!0),this.sSavedState="",this.bShown=!1}var n=i(2),r=i(46),o=i(43),a=i(189),h=i(181),u=i(183),c=i(184),p=i(185);s.prototype.ViewTemplate="",s.prototype.onRoute=function(t){this.bShown=!0,this.revert(),n.isFunction(this.onRouteChild)&&this.onRouteChild(t)},s.prototype.hide=function(t,e){this.getCurrentState()!==this.sSavedState?c.showPopup(p,[o.i18n("COREWEBCLIENT/CONFIRM_DISCARD_CHANGES"),n.bind(function(i){i?(this.bShown=!1,t(),this.revert()):n.isFunction(e)&&e()},this)]):(this.bShown=!1,t())},s.prototype.getCurrentValues=function(){return[]},s.prototype.getCurrentState=function(){var t=this.getCurrentValues();return t.join(":")},s.prototype.updateSavedState=function(){this.sSavedState=this.getCurrentState()},s.prototype.revertGlobalValues=function(){},s.prototype.revert=function(){this.revertGlobalValues(),this.updateSavedState()},s.prototype.getParametersForSave=function(){return{}},s.prototype.save=function(){n.isFunction(this.validateBeforeSave)&&!this.validateBeforeSave()||(this.isSaving(!0),a.send(this.sServerModule,"UpdateSettings",this.getParametersForSave(),this.onResponse,this))},s.prototype.applySavedValues=function(t){},s.prototype.onResponse=function(t,e){if(this.isSaving(!1),t.Result){var i=e.Parameters;this.updateSavedState(),this.applySavedValues(i),u.showReport(o.i18n("COREWEBCLIENT/REPORT_SETTINGS_UPDATE_SUCCESS"))}else h.showErrorByCode(t,o.i18n("COREWEBCLIENT/ERROR_SAVING_SETTINGS_FAILED"))},s.prototype.setAccessLevel=function(t,e){},t.exports=s},235:function(t,e,i){"use strict";function s(){l.call(this,"AdminPanelWebclient"),this.aScreens=[{sHash:p.buildHashFromArray(E.get("")),sLinkText:h.i18n("ADMINPANELWEBCLIENT/HEADING_SYSTEM_SETTINGS_TABNAME"),sType:"",oView:null}],n.each(d.EntitiesData,n.bind(function(t){var e=new y(t.Type),i=n.bind(function(t,e,i){"create"===i?this.createEntity():t===this.currentEntityType()&&this.changeEntity(t,e,i||"")},this);e.setChangeEntityHandler(i),this.aScreens.push({sHash:p.buildHashFromArray(E.get(t.Type)),sLinkText:h.i18n(t.LinkTextKey),sType:t.Type,oView:e})},this)),this.currentEntityType=o.observable(""),this.currentEntitiesId=o.observable({}),this.currentEntitiesView=o.computed(function(){var t=this.currentEntityType(),e=n.find(this.aScreens,function(e){return e.sType===t});return e?e.oView:null},this),this.currentEntitiesView.subscribe(function(){this.currentEntitiesView()&&this.currentEntitiesView().onShow()},this),this.showModulesTabs=o.computed(function(){return""===this.currentEntityType()||this.currentEntitiesView().hasSelectedEntity()},this),this.tabs=o.observableArray([]),this.currentTab=o.observable(null),this.aStartErrors=[],u.broadcastEvent("AdminPanelWebclient::ConstructView::after",{Name:this.ViewConstructorName,View:this})}var n=i(2),r=i(1),o=i(46),a=i(3),h=i(43),u=i(179),c=i(183),p=i(191),l=i(194),E=i(236),d=i(233),y=i(237);n.extendOwn(s.prototype,l.prototype),s.prototype.ViewTemplate="AdminPanelWebclient_SettingsView",s.prototype.ViewConstructorName="CSettingsView",s.prototype.registerTab=function(t,e,i){if(n.isFunction(t)){var s=this.tabs;return new a(t).then(function(t){s.push({view:t,name:e,title:i})})}return!1},s.prototype.sortRegisterTabs=function(){this.tabs(n.sortBy(this.tabs(),function(t){var e=n.indexOf(d.TabsOrder,t.name);return e!==-1?e:d.TabsOrder.length}))},s.prototype.cancelCreatingEntity=function(){p.setHash(E.get(this.currentEntityType(),{},""))},s.prototype.createEntity=function(){p.setHash(E.get(this.currentEntityType(),{},"create"))},s.prototype.changeEntity=function(t,e,i){var s=n.clone(this.currentEntitiesId()),r=!!n.find(this.tabs(),function(t){return t.name===i}),o=this.currentTab()?this.currentTab().name:"";s[t]=e,p.setHash(E.get(t,s,r?i:o))},s.prototype.onBind=function(){n.each(this.tabs(),n.bind(function(t){if(t.view&&n.isFunction(t.view.getStartError)){var e=t.view.getStartError();n.isFunction(e)&&(e.subscribe(function(){this.showStartError()},this),this.aStartErrors.push(e))}},this)),this.showStartError()},s.prototype.showStartError=function(){var t=[];n.each(this.aStartErrors,function(e){var i=e();""!==i&&t.push(i)}),c.showError(t.join("<br /><br />"),!0)},s.prototype.onRoute=function(t){var e=E.parse(t),i=t.slice(1),s=this.currentEntityType()===e.CurrentType,o=this.currentEntitiesId()[e.CurrentType]===e.Entities[e.CurrentType],a=this.currentTab()&&this.currentTab().name===e.Last,h=this.currentTab(),u=n.bind(function(){this.showNewScreenView(e),this.showNewTabView(e.Last,i)},this),c=n.bind(function(){h&&p.replaceHashDirectly(E.get(this.currentEntityType(),this.currentEntitiesId(),this.currentTab()?this.currentTab().name:""))},this);s&&o&&a?h&&h.view.onRoute(i):h&&r.isFunction(h.view.hide)?h.view.hide(u,c):u()},s.prototype.showNewScreenView=function(t){var e=n.find(this.aScreens,function(e){return e.sType===t.CurrentType});this.currentEntityType(t.CurrentType),this.currentEntitiesId(t.Entities),e&&e.oView&&("create"===t.Last?e.oView.openCreateForm():e.oView.cancelCreatingEntity(),e.oView.changeEntity(t.Entities[t.CurrentType]))},s.prototype.showNewTabView=function(t,e){n.each(this.tabs(),n.bind(function(t){t.view&&n.isFunction(t.view.setAccessLevel)&&t.view.setAccessLevel(this.currentEntityType(),this.currentEntitiesId()[this.currentEntityType()])},this));var i=n.find(this.tabs(),function(e){return e.name===t});i&&i.view&&i.view.visible()||(i=n.find(this.tabs(),function(t){return t.view&&t.view.visible()})),i&&(r.isFunction(i.view.onRoute)&&i.view.onRoute(e),this.currentTab(i))},s.prototype.changeTab=function(t){p.setHash(E.get(this.currentEntityType(),this.currentEntitiesId(),t))},s.prototype.logout=function(){u.logout()},s.prototype.deleteCurrentEntity=function(){this.currentEntitiesView()&&this.currentEntitiesView().deleteCurrentEntity()},s.prototype.setAddHash=function(t){p.setHash(n.union([d.HashModuleName,this.currentTab()?this.currentTab().name:""],t))},t.exports=new s},236:function(t,e,i){"use strict";function s(t){return u===t.substr(0,1)&&/^[1-9][\d]*$/.test(t.substr(u.length))}function n(t){return h===t.substr(0,h.length)}var r=i(2),o=i(44),a=i(233),h="s.",u="p.",c={};c.get=function(t,e,i,s,n){var c=[a.HashModuleName];return e=e||[],r.each(a.EntitiesData,function(i){o.isPositiveNumber(e[i.Type])?c.push(i.ScreenHash.substr(0,1)+e[i.Type]):t===i.Type&&c.push(i.ScreenHash)}),o.isPositiveNumber(s)&&s>1&&c.push(u+s),o.isNonEmptyString(n)&&c.push(h+n),o.isNonEmptyString(i)&&c.push(i),c},c.parse=function(t){var e=0,i={},c="",p=1,l="",E="";return r.each(a.EntitiesData,function(r){t[e]&&r.ScreenHash===t[e]&&(c=r.Type,e++),t[e]&&r.ScreenHash.substr(0,1)===t[e].substr(0,1)&&o.pInt(t[e].substr(1))>0&&(i[r.Type]=o.pInt(t[e].substr(1)),c=r.Type,e++),t.length>e&&(E=o.pString(t[e]),s(E)&&(p=o.pInt(E.substr(u.length)),p<=0&&(p=1),e++)),t.length>e&&(E=o.pString(t[e]),n(E)&&(l=E.substr(h.length),e++))}),{Entities:i,CurrentType:c,Last:o.isNonEmptyString(t[e])?t[e]:"",Page:p,Search:l}},t.exports=c},237:function(t,e,i){"use strict";function s(t){this.sType=t,this.oEntityCreateView=this.getEntityCreateView(),this.entities=r.observableArray([]),this.totalEntitiesCount=r.observable(0),this.current=r.observable(0),this.showCreateForm=r.observable(!1),this.isCreating=r.observable(!1),this.hasSelectedEntity=r.computed(function(){var t=n.map(this.entities(),function(t){return t.Id});return n.indexOf(t,this.current())!==-1},this),this.justCreatedId=r.observable(0),this.fChangeEntityHandler=function(){},r.computed(function(){0===this.justCreatedId()&&!this.showCreateForm()&&!this.hasSelectedEntity()&&this.entities().length>0&&this.fChangeEntityHandler(this.sType,this.entities()[0].Id)},this).extend({throttle:1}),this.checkedEntities=r.computed(function(){return n.filter(this.entities(),function(t){return t.checked()},this)},this),this.hasCheckedEntities=r.computed(function(){return this.checkedEntities().length>0},this),this.deleteCommand=h.createCommand(this,this.deleteCheckedEntities,this.hasCheckedEntities),this.deactivateCommand=h.createCommand(this,function(){},this.hasCheckedEntities),this.selectedCount=r.computed(function(){return this.checkedEntities().length},this),this.searchValue=r.observable(""),this.newSearchValue=r.observable(""),this.isSearchFocused=r.observable(!1),this.loading=r.observable(!1),this.searchText=r.computed(function(){return o.i18n("ADMINPANELWEBCLIENT/INFO_SEARCH_RESULT",{SEARCH:this.searchValue()})},this),this.oPageSwitcher=new p(0,y.EntitiesPerPage),this.oPageSwitcher.currentPage.subscribe(function(){this.loading(!0),this.requestEntities()},this),this.totalEntitiesCount.subscribe(function(){this.oPageSwitcher.setCount(this.totalEntitiesCount())},this),this.aIdListDeleteProcess=[]}var n=i(2),r=i(46),o=i(43),a=i(44),h=i(213),u=i(181),c=i(183),p=i(238),l=i(184),E=i(185),d=i(239),y=i(233);s.prototype.ViewTemplate="AdminPanelWebclient_EntitiesView",s.prototype.CreateFormViewTemplate="AdminPanelWebclient_EntityCreateFormView",s.prototype.getEntityCreateView=function(){switch(this.sType){case"Tenant":return i(240);case"User":return i(241)}},s.prototype.onShow=function(){this.requestEntities()},s.prototype.search=function(){this.loading(!0),this.oPageSwitcher.setPage(1,y.EntitiesPerPage),this.requestEntities()},s.prototype.clearSearch=function(){this.newSearchValue(""),this.loading(!0),this.requestEntities()},s.prototype.requestEntities=function(){var t={Type:this.sType,Offset:(this.oPageSwitcher.currentPage()-1)*y.EntitiesPerPage,Limit:y.EntitiesPerPage,Search:this.newSearchValue()};this.searchValue(this.newSearchValue()),d.send("GetEntityList",t,function(t){this.loading(!1),t.Result&&n.isArray(t.Result.Items)&&(n.each(t.Result.Items,function(t){t.Id=a.pInt(t.Id),t.checked=r.observable(!1),t.trottleChecked=function(t,e){e.stopPropagation(),this.checked(!this.checked())}}),this.entities(t.Result.Items),this.totalEntitiesCount(a.pInt(t.Result.Count)),0===this.entities().length?this.fChangeEntityHandler(this.sType,void 0,"create"):0!==this.justCreatedId()&&this.fChangeEntityHandler(this.sType,this.justCreatedId()),this.aIdListDeleteProcess=[])},this)},s.prototype.setChangeEntityHandler=function(t){this.fChangeEntityHandler=t},s.prototype.changeEntity=function(t){this.current(a.pInt(t)),this.justCreatedId(0)},s.prototype.openCreateForm=function(){this.showCreateForm(!0),this.oEntityCreateView.clearFields()},s.prototype.cancelCreatingEntity=function(){this.showCreateForm(!1)},s.prototype.createEntity=function(){!this.oEntityCreateView||n.isFunction(this.oEntityCreateView.isValidSaveData)&&!this.oEntityCreateView.isValidSaveData()||(this.isCreating(!0),d.send("Tenant"===this.sType?"CreateTenant":"CreateUser",this.oEntityCreateView.getParametersForSave(),function(t){t.Result?(c.showReport(o.i18n("ADMINPANELWEBCLIENT/REPORT_CREATE_ENTITY_"+this.sType.toUpperCase())),this.justCreatedId(a.pInt(t.Result)),this.cancelCreatingEntity()):u.showErrorByCode(t,o.i18n("ADMINPANELWEBCLIENT/ERROR_CREATE_ENTITY_"+this.sType.toUpperCase())),this.requestEntities(),this.isCreating(!1)},this),this.oEntityCreateView.clearFields())},s.prototype.deleteCurrentEntity=function(){this.deleteEntities([this.current()])},s.prototype.deleteCheckedEntities=function(){var t=n.map(this.checkedEntities(),function(t){return t.Id});this.deleteEntities(t)},s.prototype.deleteEntities=function(t){a.isNonEmptyArray(this.aIdListDeleteProcess)?(t=n.difference(t,this.aIdListDeleteProcess),this.aIdListDeleteProcess=n.union(t,this.aIdListDeleteProcess)):this.aIdListDeleteProcess=t,t.length>0&&l.showPopup(E,[o.i18n("ADMINPANELWEBCLIENT/CONFIRM_DELETE_"+this.sType.toUpperCase()+"_PLURAL",{},null,t.length),n.bind(this.confirmedDeleteEntities,this,t),"",o.i18n("COREWEBCLIENT/ACTION_DELETE")])},s.prototype.confirmedDeleteEntities=function(t,e){e?d.send("DeleteEntities",{Type:this.sType,IdList:t},function(e){e.Result?c.showReport(o.i18n("ADMINPANELWEBCLIENT/REPORT_DELETE_ENTITIES_"+this.sType.toUpperCase()+"_PLURAL",{},null,t.length)):c.showError(o.i18n("ADMINPANELWEBCLIENT/ERROR_DELETE_ENTITIES_"+this.sType.toUpperCase()+"_PLURAL",{},null,t.length)),this.requestEntities()},this):this.aIdListDeleteProcess=[]},s.prototype.groupCheck=function(){var t=!this.hasCheckedEntities();n.each(this.entities(),function(e){e.checked(t)})},t.exports=s},238:function(t,e,i){"use strict";function s(t,e){this.bShown=!1,this.currentPage=o.observable(1),this.count=o.observable(t),this.perPage=o.observable(e),this.firstPage=o.observable(1),this.lastPage=o.observable(1),this.pagesCount=o.computed(function(){var t=this.perPage()>0?Math.ceil(this.count()/this.perPage()):0;return t>0?t:1},this),o.computed(function(){var t=20,e=4,i=this.pagesCount(),s=this.currentPage(),n=s,r=s;if(i>1)for(;;){if(t--,1<n&&(n--,e--),0===e)break;if(i>r&&(r++,e--),0===e)break;if(0===t)break}this.firstPage(n),this.lastPage(r)},this),this.visibleFirst=o.computed(function(){return this.firstPage()>1},this),this.visibleLast=o.computed(function(){return this.lastPage()<this.pagesCount()},this),this.clickPage=n.bind(this.clickPage,this),this.pages=o.computed(function(){var t=this.firstPage(),e=[];if(this.firstPage()<this.lastPage())for(;t<=this.lastPage();t++)e.push({number:t,current:t===this.currentPage(),clickFunc:this.clickPage});return e},this),h.isMobile()||this.hotKeysBind()}var n=i(2),r=i(1),o=i(46),a=i(213),h=i(179);s.prototype.ViewTemplate="CoreWebclient_PageSwitcherView",s.prototype.hotKeysBind=function(){r(document).on("keydown",r.proxy(function(t){if(this.bShown&&!a.isTextFieldFocused()){var e=t.keyCode;t.ctrlKey&&e===Enums.Key.Left?this.clickPreviousPage():t.ctrlKey&&e===Enums.Key.Right&&this.clickNextPage()}},this))},s.prototype.hide=function(){this.bShown=!1},s.prototype.show=function(){this.bShown=!0},s.prototype.clear=function(){this.currentPage(1),this.count(0)},s.prototype.setCount=function(t){this.count(t),this.currentPage()>this.pagesCount()&&this.currentPage(this.pagesCount())},s.prototype.setPage=function(t,e){this.perPage(e),t>this.pagesCount()?this.currentPage(this.pagesCount()):this.currentPage(t)},s.prototype.clickPage=function(t){var e=t.number;e<1&&(e=1),e>this.pagesCount()&&(e=this.pagesCount()),this.currentPage(e)},s.prototype.clickFirstPage=function(){this.currentPage(1)},s.prototype.clickPreviousPage=function(){var t=this.currentPage()-1;t<1&&(t=1),this.currentPage(t)},s.prototype.clickNextPage=function(){var t=this.currentPage()+1;t>this.pagesCount()&&(t=this.pagesCount()),this.currentPage(t)},s.prototype.clickLastPage=function(){this.currentPage(this.pagesCount())},t.exports=s},239:function(t,e,i){"use strict";var s=i(189),n=i(233);t.exports={send:function(t,e,i,r){s.send(n.ServerModuleName,t,e,i,r)}}},240:function(t,e,i){"use strict";function s(){this.sHeading=r.i18n("ADMINPANELWEBCLIENT/HEADING_CREATE_TENANT"),this.id=n.observable(0),this.name=n.observable(""),this.description=n.observable("")}var n=i(46),r=i(43);s.prototype.ViewTemplate="AdminPanelWebclient_EditTenantView",s.prototype.getCurrentValues=function(){return[this.id(),this.name(),this.description()]},s.prototype.clearFields=function(){this.id(0),this.name(""),this.description("")},s.prototype.parse=function(t,e){e?(this.id(t),this.name(e.Name),this.description(e.Description)):this.clearFields()},s.prototype.getParametersForSave=function(){return{Id:this.id(),Name:this.name(),Description:this.description()}},t.exports=new s},241:function(t,e,i){"use strict";function s(){this.sHeading=a.i18n("ADMINPANELWEBCLIENT/HEADING_CREATE_USER"),this.id=o.observable(0),this.publicId=o.observable(""),this.aRoles=[{text:a.i18n("ADMINPANELWEBCLIENT/LABEL_ADMINISTRATOR"),value:Enums.UserRole.SuperAdmin},{text:a.i18n("ADMINPANELWEBCLIENT/LABEL_USER"),value:Enums.UserRole.NormalUser},{text:a.i18n("ADMINPANELWEBCLIENT/LABEL_GUEST"),value:Enums.UserRole.Customer}],this.role=o.observable(Enums.UserRole.NormalUser),this.writeSeparateLog=o.observable(!1),u.broadcastEvent("AdminPanelWebclient::ConstructView::after",{Name:this.ViewConstructorName,View:this})}var n=i(2),r=i(1),o=i(46),a=i(43),h=i(183),u=i(179);s.prototype.ViewTemplate="AdminPanelWebclient_EditUserView",s.prototype.ViewConstructorName="CEditUserView",s.prototype.getCurrentValues=function(){return[this.id(),this.publicId(),this.role(),this.writeSeparateLog()]},s.prototype.clearFields=function(){this.id(0),this.publicId(""),this.role(Enums.UserRole.NormalUser),this.writeSeparateLog(!1)},s.prototype.parse=function(t,e){e?(this.id(t),this.publicId(e.PublicId),this.role(e.Role),this.writeSeparateLog(!!e.WriteSeparateLog)):this.clearFields()},s.prototype.isValidSaveData=function(){var t=""!==r.trim(this.publicId());return t||h.showError(a.i18n("ADMINPANELWEBCLIENT/ERROR_USER_NAME_EMPTY")),t},s.prototype.getParametersForSave=function(){return{Id:this.id(),PublicId:r.trim(this.publicId()),Role:this.role(),WriteSeparateLog:this.writeSeparateLog()}},s.prototype.saveEntity=function(t,e){n.each(t,function(t){"CEntitiesView"===t.constructor.name&&n.isFunction(t.createEntity)&&t.createEntity(),"CCommonSettingsPaneView"===t.constructor.name&&n.isFunction(t.save)&&t.save(e)})},t.exports=new s}});