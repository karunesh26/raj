webpackJsonp([20],{261:function(e,t,i){function s(e){this.sName="",this.visible=n.observable(!0),this.baseHash=n.observable(""),this.hash=n.observable(""),this.linkText=n.observable(e),this.isCurrent=n.observable(!1),this.recivedAnim=n.observable(!1).extend({autoResetToFalse:500}),this.unseenCount=n.observable(0),this.allowChangeTitle=n.observable(!1),this.inactiveTitle=n.observable(""),this.excludedHashes=n.observableArray([])}var n=i(46),o=i(191);s.prototype.ViewTemplate="CoreWebclient_HeaderItemView",s.prototype.setName=function(e){this.sName=e.toLowerCase(),""===this.baseHash()?(this.hash(o.buildHashFromArray([e.toLowerCase()])),this.baseHash(this.hash())):this.hash(this.baseHash())},e.exports=s},396:function(e,t,i){"use strict";e.exports=function(e){var t=i(179),s=t.getUserRole()===Enums.UserRole.SuperAdmin,n=t.getUserRole()===Enums.UserRole.NormalUser,o=t.getUserRole()===Enums.UserRole.Customer,r=null;if(s||n||o){var a=i(397);if(a.init(e),s)return{getAbstractSettingsFormViewClass:function(){return i(398)}};if(n||o)return{getScreens:function(){var e={};return e[a.HashModuleName]=function(){return i(399)},e},getHeaderItem:function(){if(null===r){var e=i(43),t=i(261);r=new t(e.i18n("COREWEBCLIENT/HEADING_SETTINGS_TABNAME"))}return{item:r,name:a.HashModuleName}},registerSettingsTab:function(e,t,s){var n=i(399);n.registerTab(e,t,s)},registerSettingsTabSection:function(e,t,s){var n=i(399);n.registerTabSection(e,t,s)},getAbstractSettingsFormViewClass:function(){return i(398)},setAddHash:function(e){var t=i(399);t.setAddHash(e)}}}return null}},397:function(e,t,i){"use strict";var s=i(2),n=i(44);e.exports={HashModuleName:"settings",TabsOrder:["common","mail","mail-accounts","contacts","calendar","files","mobilesync","outlooksync","helpdesk","openpgp"],init:function(e){var t=e.SettingsWebclient;s.isEmpty(t)||(this.TabsOrder=n.pArray(t.TabsOrder,this.TabsOrder))}}},398:function(e,t,i){"use strict";function s(e){this.sServerModule=e?e:"Core",this.isSaving=o.observable(!1),this.visible=o.observable(!0),this.sSavedState="",this.bShown=!1,this.SettingsTabName="",this.SettingsTabTitle="",this.aSettingsSections=[]}var n=i(2),o=i(46),r=i(43),a=i(189),h=i(181),u=i(183),c=i(184),b=i(185);s.prototype.ViewTemplate="",s.prototype.addSettingsSection=function(e){this.aSettingsSections.push(e)},s.prototype.showTab=function(e){this.bShown=!0,this.revert(),n.isFunction(this.onShow)&&this.onShow(e),n.each(this.aSettingsSections,function(t){n.isFunction(t.onShow)&&t.onShow(e)})},s.prototype.hide=function(e,t){var i=this.getCurrentState()!==this.sSavedState;n.each(this.aSettingsSections,function(e){n.isFunction(e.getCurrentState)&&(i=i||e.getCurrentState()!==e.sSavedState)}),i?c.showPopup(b,[r.i18n("COREWEBCLIENT/CONFIRM_DISCARD_CHANGES"),n.bind(function(i){i?(this.bShown=!1,e(),this.revert()):n.isFunction(t)&&t()},this)]):(this.bShown=!1,e())},s.prototype.getCurrentValues=function(){return[]},s.prototype.getCurrentState=function(){var e=this.getCurrentValues();return e.join(":")},s.prototype.updateSavedState=function(){this.sSavedState=this.getCurrentState()},s.prototype.revertGlobalValues=function(){},s.prototype.revert=function(){n.each(this.aSettingsSections,function(e){n.isFunction(e.revert)&&e.revert()}),this.revertGlobalValues(),this.updateSavedState()},s.prototype.getParametersForSave=function(){return{}},s.prototype.save=function(){n.isFunction(this.validateBeforeSave)&&!this.validateBeforeSave()||(this.isSaving(!0),a.send(this.sServerModule,"UpdateSettings",this.getParametersForSave(),this.onResponse,this))},s.prototype.applySavedValues=function(e){},s.prototype.onResponse=function(e,t){if(this.isSaving(!1),e.Result){var i=t.Parameters;this.updateSavedState(),this.applySavedValues(i),u.showReport(r.i18n("COREWEBCLIENT/REPORT_SETTINGS_UPDATE_SUCCESS"))}else h.showErrorByCode(e,r.i18n("COREWEBCLIENT/ERROR_SAVING_SETTINGS_FAILED"))},s.prototype.setAccessLevel=function(e,t){},e.exports=s},399:function(e,t,i){"use strict";function s(){u.call(this,"SettingsWebclient"),this.tabs=r.observableArray([]),this.currentTab=r.observable(null),a.subscribeEvent("OpenSettingTab",n.bind(function(e){this.changeTab(e.Name)},this)),a.broadcastEvent("SettingsWebclient::ConstructView::after",{Name:this.ViewConstructorName,View:this})}var n=i(2),o=i(1),r=i(46),a=i(179),h=i(191),u=i(194),c=i(397),b=o("html");n.extendOwn(s.prototype,u.prototype),s.prototype.ViewTemplate="SettingsWebclient_SettingsView",s.prototype.ViewConstructorName="CSettingsView",s.prototype.registerTab=function(e,t,i){var s=c.TabsOrder.length,o=e(),r=n.findWhere(this.tabs(),{name:t});n.isEmpty(o)||(o.SettingsTabName=t,o.SettingsTabTitle=i,r&&(n.isArray(r.sections)&&(n.each(r.sections,function(e){o.addSettingsSection(e)}),delete r.sections),r.view=o)),r||this.tabs.push({view:o,name:t}),this.tabs(n.sortBy(this.tabs(),function(e){var t=n.indexOf(c.TabsOrder,e.name);return t!==-1?t:s}))},s.prototype.registerTabSection=function(e,t){var i=n.findWhere(this.tabs(),{name:t}),s=e();i?i.view.addSettingsSection(s):(this.registerTab(function(){return{}},t,""),i=n.findWhere(this.tabs(),{name:t}),i&&(n.isArray(i.sections)||(i.sections=[]),i.sections.push(s)))},s.prototype.onShow=function(){b.addClass("non-adjustable")},s.prototype.onHide=function(){b.removeClass("non-adjustable")},s.prototype.onRoute=function(e){var t=e.shift(),i=this.currentTab(),s=n.find(this.tabs(),function(e){return e.name===t}),o=function(){s&&(n.isFunction(s.view.showTab)&&s.view.showTab(e),this.currentTab(s),s.name!==t&&h.replaceHashDirectly([c.HashModuleName,s.name]))}.bind(this),r=n.bind(function(){i&&h.replaceHashDirectly([c.HashModuleName,i.name])},this),a=!0;return i&&t===i.name?void(n.isFunction(i.view.showTab)&&i.view.showTab(e)):(s&&s.view.visible&&!s.view.visible()&&(s=n.find(this.tabs(),function(e){return!e.view.visible||e.view.visible()})),s?i&&n.isFunction(i.view.hide)&&(i.view.hide(o,r),a=!1):i||(s=n.find(this.tabs(),function(e){return!e.view.visible||e.view.visible()})),void(a&&o()))},s.prototype.changeTab=function(e){h.setHash([c.HashModuleName,e])},s.prototype.setAddHash=function(e){h.setHash(n.union([c.HashModuleName,this.currentTab()?this.currentTab().name:""],e))},e.exports=new s}});